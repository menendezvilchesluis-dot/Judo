<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marcador de Judo ‚Äì Club</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%23121a33'/%3E%3Ctext x='32' y='40' font-size='28' text-anchor='middle' fill='%2328d07d' font-family='Arial,sans-serif'%3EJ%3C/text%3E%3C/svg%3E"/>
  <style>
    :root{--bg:#0b1020;--panel:#121a33;--accent:#28d07d;--blue:#1b58ff;--white:#f2f5ff;--whiteText:#0b1020;--warn:#ffd34d;--danger:#ff4d4d}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,var(--bg),#05070f 60%);color:#e7ebff;display:grid;grid-template-columns:420px 1fr;gap:18px;padding:18px;overflow:hidden}
    .panel{background:var(--panel);border:1px solid #1e2a55;border-radius:18px;padding:16px;overflow:auto}
    h1{margin:0 0 8px;font-size:20px;color:#8aa0ff}
    h2{margin:18px 0 8px;font-size:14px;text-transform:uppercase;color:#b9c6ff;letter-spacing:1.2px}
    label{display:block;font-size:12px;color:#c7d3ff;margin:10px 0 4px}
    input{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #2a3a72;background:#0f1833;color:#e7ebff}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;border-radius:12px;border:1px solid #2a3a72;background:#0f1833;color:#e7ebff;cursor:pointer}
    .btn.full{width:100%}

    .preview{border-radius:16px;border:1px solid #233067;overflow:hidden}
    .scoreboard{width:100%;height:100%;display:grid;grid-template-rows:1fr auto;background:#000;font-weight:700}
    .sb-top{display:grid;grid-template-columns:1fr 140px 1fr;height:100%}
    .side{display:grid;grid-template-rows:60px 1fr 90px}
    .side.blue{background:var(--blue)}
    .side.white{background:var(--white);color:var(--whiteText)}
    .name{display:flex;align-items:center;justify-content:space-between;padding:8px 14px;font-size:28px}
    .club{font-size:16px;opacity:.9}
    .abbr{font-size:20px;font-weight:900}
    .points{display:flex;align-items:center;justify-content:center;font-size:160px}
    .penalties{display:flex;align-items:center;justify-content:center;gap:12px}
    .card{width:24px;height:36px;border-radius:4px;border:2px solid rgba(0,0,0,.25)}
    .card.yellow{background:var(--warn)}
    .card.red{background:var(--danger)}
    .center{background:#090909;color:var(--accent);display:grid;grid-template-rows:60px 1fr 90px;align-items:center;text-align:center;border-left:4px solid #000;border-right:4px solid #000}
    .meta{display:flex;align-items:center;justify-content:center;gap:14px;color:#a9ffd2;font-size:20px}
    .timer{font-size:160px;line-height:1}
    .weight{font-size:26px;color:#bfead6}
    .sb-bottom{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:#0b0b0b;color:#9cd4ff;font-size:22px}
  </style>
</head>
<body>
  <aside class="panel">
    <h1>Marcador de Judo ‚Äî Control</h1>
    <h2>Datos del combate</h2>
    <div class="row">
      <div>
        <label>Competidor Azul ‚Äî Nombre</label>
        <input id="blueName" value="TORO SOLER J.">
      </div>
      <div>
        <label>Competidor Blanco ‚Äî Nombre</label>
        <input id="whiteName" value="MANUKYAN R.">
      </div>
    </div>
    <div class="row">
      <div>
        <label>Club / Provincia (Azul)</label>
        <input id="blueClub" value="VAL">
      </div>
      <div>
        <label>Club / Provincia (Blanco)</label>
        <input id="whiteClub" value="NAV">
      </div>
    </div>
    <div class="row">
      <div>
        <label>Peso / Categor√≠a</label>
        <input id="weight" value="-66 kg">
      </div>
      <div>
        <label>Ronda / Observaci√≥n</label>
        <input id="round" value="Round 1">
      </div>
    </div>

    <h2>Tiempo</h2>
    <div class="grid3">
      <div>
        <label>Minutos</label>
        <input type="number" id="minutes" min="0" value="3">
      </div>
      <div>
        <label>Segundos</label>
        <input type="number" id="seconds" min="0" max="59" value="0">
      </div>
      <div>
        <label>&nbsp;</label>
        <button class="btn full" id="applyTime">Aplicar</button>
      </div>
    </div>
    <div class="grid3" style="margin-top:8px">
      <button class="btn" id="startStop">‚èØÔ∏è Iniciar / Pausar</button>
      <button class="btn" id="add10">‚ûï 10s</button>
      <button class="btn" id="sub10">‚ûñ 10s</button>
    </div>

    <h2>Vista previa</h2>
    <div class="preview" id="preview"></div>
  </aside>

  <section id="display" class="scoreboard" aria-label="Marcador"></section>

  <script>
  (function(){
    // Estado m√≠nimo y seguro
    var state = { blue:{name:'TORO SOLER J.',club:'VAL',yuko:0,waza:0,ippon:0,shido:0,hansoku:false}, white:{name:'MANUKYAN R.',club:'NAV',yuko:0,waza:0,ippon:0,shido:0,hansoku:false}, weight:'-66 kg', round:'Round 1', secondsTotal:180, running:false };
    var remaining = state.secondsTotal; var timerId=null; var childWin=null;

    function esc(s){ return String(s==null?'':s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
    function pad(n){ return String(n).padStart(2,'0'); }
    function t(secs){ var m=Math.floor(secs/60), s=secs%60; return m+":"+pad(s); }

    function scoreTxt(x){ return x.ippon? 'IP' : (x.waza>0? x.waza+'W' : (x.yuko>0? x.yuko+'Y' : '0')); }
    function cards(x){ var y=''; for(var i=0;i<x.shido;i++){ y+='<div class="card yellow"></div>'; } return y+(x.hansoku?'<div class="card red"></div>':''); }

    function render(container){
      var html = ''+
        '<div class="sb-top">'+
          '<div class="side blue">'+
            '<div class="name"><div class="club">'+esc(state.blue.club)+'</div><div class="abbr">AZUL</div></div>'+
            '<div class="points">'+scoreTxt(state.blue)+'</div>'+
            '<div class="penalties">'+cards(state.blue)+'</div>'+
          '</div>'+
          '<div class="center">'+
            '<div class="meta">'+esc(state.round)+' ‚Ä¢ <span class="weight">'+esc(state.weight)+'</span></div>'+
            '<div class="timer" id="timerText">'+t(remaining)+'</div>'+
            '<div class="meta" style="opacity:.9">'+esc(state.blue.name)+' vs '+esc(state.white.name)+'</div>'+
          '</div>'+
          '<div class="side white">'+
            '<div class="name"><div class="abbr">BLANCO</div><div class="club">'+esc(state.white.club)+'</div></div>'+
            '<div class="points">'+scoreTxt(state.white)+'</div>'+
            '<div class="penalties">'+cards(state.white)+'</div>'+
          '</div>'+
        '</div>'+
        '<div class="sb-bottom">'+
          '<div>'+esc(state.blue.name)+'</div>'+
          '<div>Tiempo '+(state.running?'üü¢':'‚è∏Ô∏è')+'</div>'+
          '<div>'+esc(state.white.name)+'</div>'+
        '</div>';
      container.innerHTML = html;
    }

    var display = document.getElementById('display');
    var preview = document.getElementById('preview');

    function fullRender(){ render(display); render(preview); }
    fullRender();

    function updateTimer(){ var els=document.querySelectorAll('#timerText'); for(var i=0;i<els.length;i++){ els[i].textContent=t(remaining); } }
    function tick(){ if(!state.running) return; if(remaining>0){ remaining--; updateTimer(); } else { stop(); } }
    function start(){ if(state.running) return; state.running=true; timerId=setInterval(tick,1000); fullRender(); }
    function stop(){ state.running=false; if(timerId){clearInterval(timerId); timerId=null;} fullRender(); }

    document.getElementById('applyTime').onclick=function(){ var m=+document.getElementById('minutes').value||0; var s=+document.getElementById('seconds').value||0; state.secondsTotal=m*60+s; remaining=state.secondsTotal; stop(); };
    document.getElementById('startStop').onclick=function(){ state.running? stop(): start(); };
    document.getElementById('add10').onclick=function(){ remaining=Math.min(3599,remaining+10); updateTimer(); };
    document.getElementById('sub10').onclick=function(){ remaining=Math.max(0,remaining-10); updateTimer(); };

    // Diagn√≥stico b√°sico visible si algo falla
    window.addEventListener('error', function(e){
      var box=document.createElement('div'); box.style.position='fixed'; box.style.left='0'; box.style.right='0'; box.style.bottom='0'; box.style.background='#300'; box.style.color='#fff'; box.style.padding='8px 12px'; box.style.fontFamily='monospace'; box.textContent='ERROR: '+e.message; document.body.appendChild(box);
    });
  })();
  </script>
</body>
</html>
